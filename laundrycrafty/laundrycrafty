-- Database LaundryCrafty
CREATE DATABASE laundrycrafty;
USE laundrycrafty;

-- Tabel user (admin/kasir)
CREATE TABLE user (
    id_user INT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    role ENUM('admin', 'kasir') DEFAULT 'kasir'
);

-- Tabel pelanggan
CREATE TABLE pelanggan (
    id_pelanggan INT PRIMARY KEY AUTO_INCREMENT,
    nama VARCHAR(100) NOT NULL,
    alamat TEXT,
    no_hp VARCHAR(15)
);

-- Tabel layanan
CREATE TABLE layanan (
    id_layanan INT PRIMARY KEY AUTO_INCREMENT,
    nama_layanan VARCHAR(50) NOT NULL,
    harga_per_kg DECIMAL(10,2) NOT NULL
);

-- Tabel transaksi
CREATE TABLE transaksi (
    id_transaksi INT PRIMARY KEY AUTO_INCREMENT,
    id_pelanggan INT,
    id_layanan INT,
    tanggal_masuk DATE NOT NULL,
    tanggal_selesai DATE NOT NULL,
    berat DECIMAL(10,2) NOT NULL,
    total_harga DECIMAL(10,2) NOT NULL,
    status ENUM('Proses', 'Selesai', 'Sudah Diambil') DEFAULT 'Proses',
    FOREIGN KEY (id_pelanggan) REFERENCES pelanggan(id_pelanggan),
    FOREIGN KEY (id_layanan) REFERENCES layanan(id_layanan)
);

-- Insert data default
INSERT INTO user (username, password, role) VALUES 
('admin', '$2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'admin'),
('kasir', '$2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'kasir');
-- Password default: password

INSERT INTO layanan (nama_layanan, harga_per_kg) VALUES 
('Cuci Kering', 5000),
('Cuci Setrika', 7000),
('Express', 10000);

INSERT INTO pelanggan (nama, alamat, no_hp) VALUES 
('Budi Santoso', 'Jl. Merdeka No. 10', '081234567890'),
('Siti Aminah', 'Jl. Pahlawan No. 25', '082345678901');